"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9135],{9135:(ce,Z,n)=>{n.r(Z),n.d(Z,{InputDemoModule:()=>le});var m=n(6814),l=n(95),v=n(3557),g=n(9862),p=n(5219),e=n(4769),L=n(5905),M=n(8814),O=n(7744),f=n(707),A=n(8608),_=n(9552),b=n(4480),I=n(4104),D=n(2947);function $(o,c){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const d=c.$implicit;e.Q6J("value",d.organization_id),e.xp6(1),e.hij(" ",d.organization_name," ")}}function Y(o,c){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const d=c.$implicit;e.Q6J("value",d.user_id),e.xp6(1),e.hij(" ",d.user_name," ")}}function F(o,c){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const d=c.$implicit;e.Q6J("value",d.device_id),e.xp6(1),e.hij(" ",d.device," ")}}function P(o,c){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Sl No"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Device Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"User Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Organization Name"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"model "),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Status "),e.qZA(),e.TgZ(13,"th",25),e._uU(14,"Edit"),e.qZA(),e.TgZ(15,"th",25),e._uU(16,"Delete"),e.qZA()())}function B(o,c){if(1&o){const d=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e._UZ(12,"p-badge",27),e.qZA(),e.TgZ(13,"td")(14,"button",28),e.NdJ("click",function(){const r=e.CHM(d).$implicit,a=e.oxw();return e.KtG(a.selectProduct(r))}),e.qZA()(),e.TgZ(15,"td")(16,"p-button",29),e.NdJ("click",function(){const r=e.CHM(d).$implicit,a=e.oxw();return e.KtG(a.stockDelete(r))}),e.qZA()()()}if(2&o){const d=c.rowIndex,t=c.$implicit;e.xp6(2),e.Oqu(d+1),e.xp6(2),e.Oqu(t.device),e.xp6(2),e.Oqu(t.user_name),e.xp6(2),e.Oqu(t.organization_name),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Q6J("value","Y"==t.user_active_status?"Active":"Deactive")("severity","Y"==t.user_active_status?"success":"danger")}}function Q(o,c){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),e.qZA())}function W(o,c){1&o&&e._UZ(0,"div",31)}const q=function(){return{"min-width":"50rem"}};let j=(()=>{var o;class c{constructor(t,i,r,a,s,u,h){this.router=t,this.authservice=i,this.api=r,this.countryService=a,this.fb=s,this.http=u,this.messageService=h,this.filteredCountries=[],this.countries=[],this.selectedState=null,this.modelList=[],this.userList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=20,this.companys=[],this.client_id=+localStorage.getItem("c_id"),this.stockIn=this.fb.group({org_id:["0",l.kI.required],device_id:["0",[l.kI.required]],device_name:["",[l.kI.required]],user_id:["0",[l.kI.required]],manage_user_device_id:[""]}),this.stockIn2=this.fb.group({org_id:["0",l.kI.required],device_id:["0",[l.kI.required]],device_name:["",[l.kI.required]],user_id:["0",[l.kI.required]],manage_user_device_id:[""]})}ngOnInit(){this.ct=this.stockIn.controls,this.getuser(),this.getDevice(),this.getDeviceData(),this.getOrganization(),this.loadPage()}getDeviceData(){}getuser(){const t=this.api.baseUrl,i=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/manage_user/list",{client_id:this.client_id},{headers:r}).subscribe(s=>{console.log(s),this.userList=s,this.users=this.userList.data,this.users2=this.userList.data},s=>{"401"==s.status&&this.router.navigate(["/"]),console.log(s.status),console.error(s),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}onPageChange(t){this.first=t.first,this.rows=t.rows,this.goingPage=t.page+1}loadPage(){this.spinner=!0;const t=this.api.baseUrl,i=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/manage_user/list_user_device",{client_id:this.client_id},{headers:r}).subscribe(s=>{this.spinner=!1,this.stockApi=s,this.stockListAll=this.stockApi.data})}selectProduct(t){this.users=this.users2.filter(i=>i.organization_id==t.organization_id),this.stockIn.patchValue({device_id:t.device_id,org_id:t.organization_id,user_id:t.user_id,manage_user_device_id:t.manage_user_device_id})}resetData(){this.stockIn.reset(),this.stockIn.patchValue({device_id:0,org_id:0,user_id:0})}getOrganization(){const t=this.api.baseUrl,i=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/manage_organization/list",{client_id:this.client_id},{headers:r}).subscribe(s=>{console.log(s),this.companyList=s,this.companys=this.companyList.data},s=>{"401"==s.status&&this.router.navigate(["/"]),console.log(s.status),console.error(s)})}getDevice(){const t=this.api.baseUrl,i=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/devices/list",{client_id:this.client_id},{headers:r}).subscribe(s=>{console.log(s),this.modelList=s,this.models=this.modelList.data},s=>{"401"==s.status&&this.router.navigate(["/"]),console.log(s.status),console.error(s)})}setUser(){this.users=[],this.users=this.users2.filter(t=>t.organization_id==this.ct.org_id.value)}getAllStock(){this.spinner=!0,this.totalPGNO=0;const t=this.api.baseUrl,i=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${i}`);this.http.get(t+"/assign-device/list-origination",{headers:r}).subscribe(a=>{this.spinner=!1,console.log(a),this.stockApi=a,this.stockList=this.stockApi.data},a=>{"401"==a.status&&this.router.navigate(["/"]),console.log(a.status),this.spinner=!1,console.error(a)})}deviceChange(t){const i=this.models.filter(r=>r.device_id==t)[0].device;this.ct.device_name.setValue(i)}insertStockData(){this.spinner=!0;const t={client_id:this.client_id,organization_id:Number(this.ct.org_id.value),device_id:Number(this.ct.device_id.value),device:this.ct.device_name.value,user_id:Number(this.ct.user_id.value),manage_user_device_id:this.ct.manage_user_device_id.value?this.ct.manage_user_device_id.value:"",created_by:0};if(this.ct.manage_user_device_id.value){const i=this.api.baseUrl,r=localStorage.getItem("token"),a=(new g.WM).set("Authorization",`Bearer ${r}`);this.http.post(i+"/client/manage_user/edit_user_device",t,{headers:a}).subscribe(s=>{console.log(s),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Updated",life:3e3}),this.resetData(),this.loadPage()},s=>{"401"==s.status&&this.router.navigate(["/"]),console.log(s.status),this.spinner=!1,console.log(s)})}else{const i=this.api.baseUrl,r=localStorage.getItem("token"),a=(new g.WM).set("Authorization",`Bearer ${r}`);this.http.post(i+"/client/manage_user/add_device",t,{headers:a}).subscribe(s=>{console.log(s),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device created",life:3e3}),this.resetData(),this.loadPage()},s=>{"401"==s.status&&this.router.navigate(["/"]),console.log(s.status),this.spinner=!1,console.error(s)})}}filterCountry(t){const i=[],r=t.query;for(let a=0;a<this.models.length;a++){const s=this.models[a];0==s.model_name.toLowerCase().indexOf(r.toLowerCase())&&i.push(s)}this.filteredCountries=i}setWarranty(){this.warr_in_month=this.warr_in_month?this.warr_in_month:0;const t=new Date(this.ct.purchase_date.value);isNaN(t.getTime())?console.error("Invalid date input"):(t.setMonth(t.getMonth()+Number(this.warr_in_month)),this.stockIn.get("warranty_expired").setValue(t))}calculateOutputDate(){}selected(){console.log(this.selectedCountryAdvanced),this.modelID=this.selectedCountryAdvanced.model_id,this.product_n=this.selectedCountryAdvanced.product_name,this.company_n=this.selectedCountryAdvanced.company_name}get skillsFormArray(){return this.stockIn.get("sl_no")}addSkill(){this.skillsFormArray.push(this.fb.control(""))}removeSkill(t){this.skillsFormArray.removeAt(t)}addItem(t){13===t.keyCode&&(this.addSkill(),this.lastAddedIndex=this.skillsFormArray.length,this.lastAddedIndex=this.skillsFormArray.length-1)}formatedDate(t){const r=new Date(t),h=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;return console.log(h),h}stockDelete(t){const i={client_id:this.client_id,manage_user_device_id:t.manage_user_device_id};this.spinner=!0;const r=this.api.baseUrl,a=localStorage.getItem("token"),s=(new g.WM).set("Authorization",`Bearer ${a}`);this.http.post(r+"/client/manage_user/delete_user_device",i,{headers:s}).subscribe(u=>{console.log(u),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Deleted",life:3e3}),this.resetData(),this.loadPage(),this.getuser()},u=>{"401"==u.status&&this.router.navigate(["/"]),console.log(u.status),this.spinner=!1,console.error(u)})}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(v.F0),e.Y36(L.$),e.Y36(M.s),e.Y36(O.T),e.Y36(l.qu),e.Y36(g.eN),e.Y36(p.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e._Bn([p.ez])],decls:43,vars:12,consts:[[1,"col-12"],[1,"card"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4","custom-select"],["htmlFor","firstname2"],["formControlName","org_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"change"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"field","col-12","md:col-4"],["formControlName","user_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],["formControlName","device_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"change"],[1,"field","col-12","md:col-2"],["icon","pi pi-check","styleClass","p-button-primary ","label","Save",3,"click"],["icon","pi pi-refresh","styleClass","p-button-danger","label","Reset",3,"click"],[1,"col-12",2,"max-height","400px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],[3,"value"],[2,"width","5rem"],[2,"text-align","center"],[3,"value","severity"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],["type","button","pRipple","","icon","pi pi-trash","styleClass","p-button-danger",3,"click"],[1,"loader"],[1,"overlay"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Add/Edit User"),e.qZA(),e.TgZ(4,"form",2)(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Select Organization"),e.qZA(),e.TgZ(9,"select",6),e.NdJ("change",function(){return i.setUser()}),e.TgZ(10,"option",7),e._uU(11,"Select an option"),e.qZA(),e.YNc(12,$,2,2,"option",8),e.qZA()(),e.TgZ(13,"div",9)(14,"label",5),e._uU(15,"Select User"),e.qZA(),e.TgZ(16,"select",10)(17,"option",7),e._uU(18,"Select an option"),e.qZA(),e.YNc(19,Y,2,2,"option",8),e.qZA()(),e.TgZ(20,"div",9)(21,"label",5),e._uU(22,"Select Device"),e.qZA(),e.TgZ(23,"select",11),e.NdJ("change",function(a){return i.deviceChange(a.target.value)}),e.TgZ(24,"option",7),e._uU(25,"Select an option"),e.qZA(),e.YNc(26,F,2,2,"option",8),e.qZA()()(),e.TgZ(27,"div",3)(28,"div",12)(29,"p-button",13),e.NdJ("click",function(){return i.insertStockData()}),e.qZA()(),e.TgZ(30,"div",12)(31,"p-button",14),e.NdJ("click",function(){return i.resetData()}),e.qZA()()()()()(),e._UZ(32,"p-toast"),e.TgZ(33,"div",15)(34,"p-table",16,17),e.YNc(36,P,17,0,"ng-template",18),e.YNc(37,B,17,7,"ng-template",19),e.qZA(),e.TgZ(38,"div",20)(39,"p-paginator",21),e.NdJ("onPageChange",function(a){return i.onPageChange(a)}),e.qZA()()(),e.YNc(40,Q,6,0,"div",22),e.YNc(41,W,1,0,"div",23),e._UZ(42,"p-toast")),2&t&&(e.xp6(4),e.Q6J("formGroup",i.stockIn),e.xp6(8),e.Q6J("ngForOf",i.companys),e.xp6(7),e.Q6J("ngForOf",i.users),e.xp6(7),e.Q6J("ngForOf",i.models),e.xp6(8),e.Q6J("value",i.stockListAll)("tableStyle",e.DdM(11,q)),e.xp6(5),e.Q6J("first",i.first)("rows",i.rows)("totalRecords",i.totalPGNO),e.xp6(1),e.Q6J("ngIf",i.spinner),e.xp6(1),e.Q6J("ngIf",i.spinner))},dependencies:[m.sg,m.O5,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.sg,l.u,p.jx,f.Hq,f.zx,A.Ct,_.iA,b.H,I.FN,D.D],encapsulation:2}),c})(),G=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:j}]),v.Bz]}),c})();var y=n(7327),T=n(6760),U=n(1480),R=n(2169),C=n(3965),S=n(9663),k=n(5167),x=n(8062),N=n(4055),z=n(6218),J=n(3714),H=n(6022),X=n(6058),E=n(9540),V=n(6128),K=n(8057),w=n(5609),ee=n(1865),te=n(3749),ie=n(6804),se=n(7902),ne=n(1312),oe=n(3904),ae=n(3259),re=n(7680);let le=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[p.ez,p.YP],imports:[m.ez,l.u5,l.UX,G,re.L,y.WN,T._8,U.Gg,A.TX,C.kW,S.zz,k.L$,te.e4,x.XH,N.q4,ie.KZ,se.JH,z.A,ee.cc,J.j,H.Xt,R.o,X.dJ,w.Iu,E.ON,V.Qy,K.nD,f.hJ,_.U$,b.T,ne.S,oe.D,I.EV,l.u5,l.UX,y.WN,T._8,U.Gg,C.kW,S.zz,k.L$,x.XH,N.q4,z.A,J.j,D.U,ae.z]}),c})()}}]);