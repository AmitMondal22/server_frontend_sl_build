"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[7057],{7057:(re,Z,a)=>{a.r(Z),a.d(Z,{MediaDemoModule:()=>ae});var T=a(6814),m=a(95),N=a(7327),O=a(6760),w=a(1480),v=a(3965),k=a(9663),b=a(5167),J=a(8062),G=a(4055),I=a(6218),M=a(3714),L=a(4037),P=a(8052),B=a(1825),Q=a(6022),C=a(707),x=a(9552),y=a(2947),U=a(4104),h=a(5219),D=a(5118),Y=a(7680),z=a(1312),A=a(2507),g=a(9862),F=a(3026),e=a(4769),H=a(8814),S=a(981);const $=["view"],f=function(){return{standalone:!0}};function q(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"span",20),e._UZ(1,"i",21),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.openNew())}),e.qZA(),e.TgZ(3,"p-dropdown",16),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.selectedOrganization=t)})("onChange",function(){e.CHM(n);const t=e.oxw();return t.setOrg(),e.KtG(t.getGroupList())}),e.qZA()()}if(2&o){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.selectedOrganization)("ngModelOptions",e.DdM(3,f))("options",n.orgList)}}function W(o,d){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"User Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"User Email"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Group Name"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Application Id"),e.qZA()())}function K(o,d){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&o){const n=d.$implicit,i=d.rowIndex;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(n.user_name),e.xp6(2),e.Oqu(n.user_email),e.xp6(2),e.Oqu(n.group_name),e.xp6(2),e.Oqu(n.chirpstack_application_id)}}function R(o,d){1&o&&(e.TgZ(0,"div",23),e._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),e.qZA())}function j(o,d){1&o&&e._UZ(0,"div",24)}function E(o,d){1&o&&(e.TgZ(0,"small",31),e._uU(1,"Application id Name is required."),e.qZA())}function X(o,d){1&o&&(e.TgZ(0,"small",31),e._uU(1,"Group Name is required."),e.qZA())}function V(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"div",25)(1,"p-dropdown",16),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.selectedOrganization=t)})("onChange",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.setOrg())}),e.qZA()(),e.TgZ(2,"div",25)(3,"p-dropdown",26),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.selectedUser=t)})("onChange",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.setuser())}),e.qZA()(),e.TgZ(4,"div",25)(5,"label",27),e._uU(6,"Application id"),e.qZA(),e.TgZ(7,"p-inputNumber",28),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.product.application_id=t)}),e.qZA(),e.YNc(8,E,2,0,"small",29),e.qZA(),e.TgZ(9,"div",25)(10,"label",27),e._uU(11,"Group Name"),e.qZA(),e.TgZ(12,"input",30),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.product.group_name=t)}),e.qZA(),e.YNc(13,X,2,0,"small",29),e.qZA()}if(2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.selectedOrganization)("ngModelOptions",e.DdM(11,f))("options",n.orgList),e.xp6(2),e.Q6J("ngModel",n.selectedUser)("ngModelOptions",e.DdM(12,f))("options",n.users2),e.xp6(4),e.Q6J("ngModel",n.product.application_id)("useGrouping",!1),e.xp6(1),e.Q6J("ngIf",n.submitted&&!n.product.application_id),e.xp6(4),e.Q6J("ngModel",n.product.group_name),e.xp6(1),e.Q6J("ngIf",n.submitted&&!n.product.group_name)}}function ee(o,d){if(1&o){const n=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.hideDialog())}),e.qZA(),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.saveProduct())}),e.qZA()}}const te=function(){return{"min-width":"50rem"}},ie=function(){return{width:"450px"}},oe=function(){return{width:"26rem",height:"20rem"}};let ne=(()=>{var o;class d{constructor(i,t,s,r,l,p,u){this.router=i,this.api=t,this.productService=s,this.http=r,this.billID=l,this.dialogService=p,this.messageService=u,this.orgList=[],this.client_id=+localStorage.getItem("c_id"),this.user_id=+localStorage.getItem("user_id"),this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=2,this.productDialog=!1,this.visible=!1,this.submitted=!1,this.data1=[]}ngOnInit(){this.getOrg(),this.getuser()}onPageChange(i){this.first=i.first,this.rows=i.rows,this.goingPage=i.page+1,this.loadNewPage(this.goingPage)}loadNewPage(i){this.spinner=!0;const t=this.api.baseUrl,s=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${s}`);this.http.get(t+"/report/my_bill?page="+i,{headers:r}).subscribe(l=>{this.spinner=!1,this.stockApi=l,this.stockList=this.stockApi.data})}getAllseller(){this.totalPGNO=0,this.spinner=!0;const i=this.api.baseUrl,t=localStorage.getItem("token"),s=(new g.WM).set("Authorization",`Bearer ${t}`);this.http.post(i+"/client/create_group",{headers:s}).subscribe(r=>{this.spinner=!1,console.log(r),this.stockApi=r,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total},r=>{"401"==r.status&&this.router.navigate(["/"]),console.log(r.status),this.spinner=!1,console.error(r)})}setOrg(){console.log(this.selectedOrganization),this.users2=this.users.filter(i=>i.organization_id==this.selectedOrganization.organization_id)}setuser(){console.log(this.selectedUser)}getOrg(){const i=this.api.baseUrl,t=localStorage.getItem("token"),s=(new g.WM).set("Authorization",`Bearer ${t}`);this.http.post(i+"/client/manage_organization/list",{client_id:this.client_id},{headers:s}).subscribe(l=>{console.log(l),this.orgList=l.data},l=>{"401"==l.status&&this.router.navigate(["/"]),console.log(l.status),console.error(l),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}getuser(){const i=this.api.baseUrl,t=localStorage.getItem("token"),s=(new g.WM).set("Authorization",`Bearer ${t}`);this.http.post(i+"/client/manage_user/list",{client_id:this.client_id},{headers:s}).subscribe(l=>{console.log(l),this.userList=l,this.users=this.userList.data,this.users2=this.userList.data},l=>{"401"==l.status&&this.router.navigate(["/"]),console.log(l.status),console.error(l),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}searchAll(i){this.spinner=!0;const t=this.api.baseUrl,s=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${s}`);this.http.get(t+"/report/my_bill?page=1&search="+i.target.value.toString(),{headers:r}).subscribe(l=>{this.spinner=!1,this.stockApi=l,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}hideDialog(){this.productDialog=!1,this.submitted=!1}editProduct(i){this.product={...i},this.productDialog=!0}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}openORGModal(){this.visible=!0}getGroupList(){this.visible=!1;const i=this.api.baseUrl,t=localStorage.getItem("token"),s=(new g.WM).set("Authorization",`Bearer ${t}`);this.http.post(i+"/client/create_group_list",{organization_id:this.selectedOrganization.organization_id},{headers:s}).subscribe(l=>{console.log(l),this.stockApi=l,this.stockList=this.stockApi.data.map(u=>{const _=this.users.find(c=>c.user_id===u.user_id);return{...u,..._}})},l=>{"401"==l.status&&this.router.navigate(["/"]),console.log(l.status),console.error(l),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}AddGroup(i,t,s,r){const l={group_name:s,user_id:t,organization_id:i,application_id:r},p=this.api.baseUrl,u=localStorage.getItem("token"),_=(new g.WM).set("Authorization",`Bearer ${u}`);this.http.post(p+"/client/create_group",l,{headers:_}).subscribe(c=>{c&&(this.hideDialog(),console.log(c),this.selectedOrganization=null,this.messageService.add({severity:"success",summary:"Successful",detail:"New Group Created",life:3e3}))},c=>{"401"==c.status&&(this.selectedOrganization=null,this.router.navigate(["/"])),console.log(c.status),console.error(c)})}DeleteCompany(i){const t={company_id:i},s=this.api.baseUrl,r=localStorage.getItem("token"),l=(new g.WM).set("Authorization",`Bearer ${r}`);this.http.post(s+"/master/delete_company_name",t,{headers:l}).subscribe(p=>{console.log(p),this.messageService.add({severity:"success",summary:"Successful",detail:"Company Deleted",life:3e3}),this.getAllseller()},p=>{"401"==p.status&&this.router.navigate(["/"]),console.log(p.status),console.error(p)})}show(i){this.billID.cust_id=0,this.billID.cust_id=i.id,this.ref=this.dialogService.open(F.D,{header:"Customer Full Details",data:{id:i.cust_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(t=>{t&&this.messageService.add({severity:"info",summary:"Product Selected",detail:t.name})}),this.ref.onMaximize.subscribe(t=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${t.maximized}`})})}saveProduct(){this.submitted=!0,this.product.group_name?.trim()&&(this.AddGroup(this.selectedOrganization.organization_id,this.selectedUser.user_id,this.product.group_name,this.product.application_id),this.productDialog=!1,this.product={})}updateCompany(i,t,s,r){const l={id:i,group_name:t,user_id:s,application_id:r},p=this.api.baseUrl,u=localStorage.getItem("token"),_=(new g.WM).set("Authorization",`Bearer ${u}`);this.http.post(p+"/seller/edit",l,{headers:_}).subscribe(c=>{this.hideDialog(),console.log(c),this.messageService.add({severity:"success",summary:"Successful",detail:"Dealer Updated",life:3e3}),this.getAllseller()},c=>{"401"==c.status&&this.router.navigate(["/"]),console.log(c.status),console.error(c)})}ngOnDestroy(){this.ref&&this.ref.close()}}return(o=d).\u0275fac=function(i){return new(i||o)(e.Y36(A.F0),e.Y36(H.s),e.Y36(S.M),e.Y36(g.eN),e.Y36(S.M),e.Y36(D.xA),e.Y36(h.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(i,t){if(1&i&&e.Gf($,7),2&i){let s;e.iGM(s=e.CRH())&&(t.view=s.first)}},features:[e._Bn([D.xA,h.ez])],decls:21,vars:22,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],["header","Dealer Details","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Select an Organization",3,"modal","visible","visibleChange"],[1,"flex","align-items-center","gap-3","mb-3"],["optionLabel","organization_name","placeholder","Select a Organization",3,"ngModel","ngModelOptions","options","ngModelChange","onChange"],[1,"flex","justify-content-end","gap-2",2,"margin-top","100px"],["label","Cancel","severity","secondary",3,"click"],["label","Submit",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pButton","","pRipple","","label","Create Group","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],[1,"loader"],[1,"overlay"],[1,"field"],["optionLabel","user_name","placeholder","Select a User",3,"ngModel","ngModelOptions","options","ngModelChange","onChange"],["for","name"],["required","","mode","decimal","inputId","withoutgrouping",3,"ngModel","useGrouping","ngModelChange"],["class","p-error",4,"ngIf"],["type","text","pInputText","","id","name","required","","autofocus","",3,"ngModel","ngModelChange"],[1,"p-error"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"p-table",2,3),e.YNc(5,q,4,4,"ng-template",4),e.YNc(6,W,11,0,"ng-template",5),e.YNc(7,K,11,5,"ng-template",6),e.qZA(),e.TgZ(8,"div",7)(9,"p-paginator",8),e.NdJ("onPageChange",function(r){return t.onPageChange(r)}),e.qZA()()(),e.YNc(10,R,6,0,"div",9),e.YNc(11,j,1,0,"div",10),e.qZA(),e.TgZ(12,"p-dialog",11),e.NdJ("visibleChange",function(r){return t.productDialog=r}),e.YNc(13,V,14,13,"ng-template",12),e.YNc(14,ee,2,0,"ng-template",13),e.qZA(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(r){return t.visible=r}),e.TgZ(16,"div",15)(17,"p-dropdown",16),e.NdJ("ngModelChange",function(r){return t.selectedOrganization=r})("onChange",function(){return t.setOrg()}),e.qZA()(),e.TgZ(18,"div",17)(19,"p-button",18),e.NdJ("click",function(){return t.visible=!1}),e.qZA(),e.TgZ(20,"p-button",19),e.NdJ("click",function(){return t.getGroupList()}),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("value",t.stockList)("tableStyle",e.DdM(18,te)),e.xp6(6),e.Q6J("first",t.first)("rows",t.rows)("totalRecords",t.totalPGNO),e.xp6(1),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Q6J("ngIf",t.spinner),e.xp6(1),e.Akn(e.DdM(19,ie)),e.Q6J("visible",t.productDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(20,oe)),e.Q6J("modal",!0)("visible",t.visible),e.xp6(2),e.Q6J("ngModel",t.selectedOrganization)("ngModelOptions",e.DdM(21,f))("options",t.orgList))},dependencies:[T.O5,m.Fj,m.JJ,m.Q7,m.On,h.jx,C.Hq,C.zx,M.o,v.Lt,b.Rn,U.FN,y.D,x.iA,z.V],encapsulation:2}),d})(),se=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[A.Bz.forChild([{path:"",component:ne}]),A.Bz]}),d})(),ae=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[h.ez,h.YP],imports:[T.ez,m.u5,se,N.WN,O._8,w.Gg,v.kW,k.zz,b.L$,J.XH,G.q4,I.A,M.j,L.FI,P.f,B.C,M.j,v.kW,Q.Xt,C.hJ,Y.L,D.DL,U.EV,y.U,x.U$,z.S]}),d})()}}]);